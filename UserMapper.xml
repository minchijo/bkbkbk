<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bookbookbook.dao.UserDAO">

	<!--회원가입-->
	<insert id="registerUser" parameterType="com.bookbookbook.domain.UserVO">
    	INSERT INTO users (
        	userId,  password, userName, userTel, 
        	gender, birthDate, joinedDate) 
    	VALUES (
        	#{userId}, #{password}, #{userName}, #{userTel},
        	#{gender}, #{birthDate}, #{joinedDate} )
	</insert>

	<select id="loginUser" resultType="com.bookbookbook.domain.UserVO">
        SELECT * FROM users WHERE userId = #{userId}
    </select>

	
    <select id="findEmail" resultType="String">
        SELECT userId FROM users 
        WHERE userName = #{userName} AND userTel = #{userTel}
    </select>
    
   
	<!--채팅-->
		<insert id="submitReport" parameterType="ReportVO">
			INSERT INTO report (chatroomNum, reportedUser, reportTime, reportType, reportUser) VALUES (#{chatroomNum},#{reportedUser},${reportTime},#{reportType},#{reportUser})
		</insert>

	 <!-- 방문 기록 저장 -->

    <insert id="insertVisitLog" parameterType="VisitVO">
        INSERT INTO visitor (VISIT_IP, VISIT_TIME, VISIT_SITE, VISIT_BROWSER)
        VALUES (#{VISIT_IP}, #{VISIT_TIME}, #{VISIT_SITE}, #{VISIT_BROWSER})
    </insert>

</mapper>